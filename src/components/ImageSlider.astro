---
const { images } = Astro.props;
---
<div class="slider" data-slider>
  <div class="slides">
    {images.map((img) => (
      <img src={img.src} alt={img.alt} loading="lazy" />
    ))}
  </div>
</div>

<style>
.slider {
  width: 100%;
  max-width: 1200px;
  margin: auto;
  overflow: hidden;
  border-radius: 12px;
}

.slides {
  display: flex;
  transition: transform 0.6s ease-in-out;
}

.slides img {
  width: 100%;
  flex-shrink: 0;
  object-fit: cover;
}
</style>

<script>
  const sliderRoot = document.currentScript.closest("[data-slider]");
  const slidesTrack = sliderRoot.querySelector(".slides");
  const slides = slidesTrack.children;

  let index = 0;
  let interval;

  function nextSlide() {
    index = (index + 1) % slides.length;
    slidesTrack.style.transform = `translateX(-${index * 100}%)`;
  }

  function startAutoPlay() {
    interval = setInterval(nextSlide, 4000);
  }

  function stopAutoPlay() {
    clearInterval(interval);
  }

  startAutoPlay();

  // Pause on hover (desktop)
  sliderRoot.addEventListener("mouseenter", stopAutoPlay);
  sliderRoot.addEventListener("mouseleave", startAutoPlay);
</script>

